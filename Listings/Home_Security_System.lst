C51 COMPILER V9.56.0.0   HOME_SECURITY_SYSTEM                                              11/30/2017 18:33:50 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE HOME_SECURITY_SYSTEM
OBJECT MODULE PLACED IN .\Objects\Home_Security_System.obj
COMPILER INVOKED BY: C:\Program Files\C51\BIN\C51.EXE Home_Security_System.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND
                    - PRINT(.\Listings\Home_Security_System.lst) TABS(2) OBJECT(.\Objects\Home_Security_System.obj)

line level    source

   1          //////////////////////////////////
   2          //     Home Security System     //
   3          //////////////////////////////////
   4          
   5          #include <reg51.h>
   6          
   7          
   8          #define COMMAND 0
   9          #define LCD_DATA 1
  10          
  11          //Declaring Port Pins
  12          //P0
  13          sbit ARM = P0^0;
  14          //P1
  15          sbit LED0 = P1^0;
  16          sbit LED1 = P1^1;
  17          sbit LaserSwitch = P1^2;
  18          sbit EncB = P1^3;
  19          sbit GREEN = P1^5;
  20          sbit YELLOW = P1^6;
  21          sbit RED = P1^7;
  22          //P2
  23          #define ldata P2
  24          sbit busy = P2^7; // connected to DB7 on the LCD
  25          //P3
  26          sbit EncA = P3^2;
  27          sbit BREAK = P3^3;
  28          sbit rw = P3^5;
  29          sbit rs = P3^6;
  30          sbit en = P3^7;
  31          
  32          //variables
  33          bit dir;
  34          
  35          
  36          
  37          //State Functions
  38          void disarmedState();
  39          void updateTimerState();
  40          void armedState();
  41          void countdownState();
  42          void intruderState();
  43          
  44          //Function Prototypes
  45          void init_lcd();//initialize LCD
  46          void write_to_lcd(unsigned char value, bit mode);//write data or command
  47          void MSDelay(unsigned int itime);//delay 1 ms
  48          void lcdready(void);//check if lcd is ready to write to
  49          void updateTimer(int time);
  50          void updateLCD();
  51          void updateStatus();
  52          void turnOnLaser();
  53          void turnOffLaser();
  54          void countDownTimer(int num);
C51 COMPILER V9.56.0.0   HOME_SECURITY_SYSTEM                                              11/30/2017 18:33:50 PAGE 2   

  55          void updateTimerLEDs();
  56          void turnOnAlarm();
  57          void turnOffAlarm();
  58          void flashIntruder();
  59          void soundAlarm();
  60          void resetTimer();
  61          
  62          
  63          /**************************************************************/
  64          void main(){
  65   1          while(1){
  66   2            disarmedState();
  67   2            updateTimerState();
  68   2            armedState();
  69   2            countdownState();
  70   2            intruderState();
  71   2          }
  72   1          
  73   1        
  74   1        
  75   1      
  76   1      
  77   1      }
  78          /**************************************************************/
  79          
  80          
  81          void disarmedState()
  82          {
  83   1      }
  84          void updateTimerState()
  85          {
  86   1      }
  87          void armedState()
  88          {
  89   1      }
  90          void countdownState()
  91          {
  92   1        countDownTimer(12);
  93   1      }
  94          void intruderState()
  95          {
  96   1      }
  97          
  98          
  99          
 100          
 101          ////////////////////////////////////////////////////////////////
 102          //               LCD  Helper Functions                        //
 103          ////////////////////////////////////////////////////////////////
 104          void updateTimer(int time)
 105          {
 106   1      }
*** WARNING C280 IN LINE 104 OF Home_Security_System.c: 'time': unreferenced local variable
 107          
 108          
 109          //setup LCD for required display
 110          void init_lcd(){
 111   1        //all instructions here are commands, not data
 112   1        
 113   1        write_to_lcd(0x38,COMMAND);
 114   1      
 115   1        write_to_lcd(0x0E,COMMAND);
C51 COMPILER V9.56.0.0   HOME_SECURITY_SYSTEM                                              11/30/2017 18:33:50 PAGE 3   

 116   1        
 117   1        write_to_lcd(0x06,COMMAND);
 118   1        //clear display and return cursor to home position
 119   1        write_to_lcd(0x01,COMMAND);
 120   1      }
 121          
 122          void write_to_lcd(unsigned char value, bit mode){
 123   1        lcdready();
 124   1        ldata = value;
 125   1        rs = mode; //1 for data, 0 for command
 126   1        rw = 0;
 127   1        en = 1;
 128   1        MSDelay(1);
 129   1        en = 0;
 130   1      }
 131          void MSDelay(unsigned int itime){
 132   1        unsigned i, j;
 133   1        for(i=0;i<itime;i++)
 134   1          for(j=0;j<1275;j++);
 135   1      
 136   1      }
 137          void lcdready(){
 138   1        busy = 1;
 139   1        en = 1;
 140   1        rs = 0;//command
 141   1        rw = 1;//read command
 142   1        while(busy){
 143   2          en = 0;
 144   2          MSDelay(1);
 145   2          en = 1;
 146   2        }
 147   1        en = 0;
 148   1        rw = 0;
 149   1      }
 150          
 151          void updateLCD()
 152          {
 153   1      }
 154          void updateStatus()
 155          {
 156   1      }
 157          void turnOnLaser()
 158          {
 159   1      }
 160          void turnOffLaser()
 161          {
 162   1      }
 163          void countDownTimer(int time)
 164          {
 165   1        unsigned int count;
 166   1        
 167   1        //Converting and separating to what was passed in
 168   1        char msb = (time/10)+48;
 169   1        char lsb = (time%10)+48;
 170   1        
 171   1        unsigned char code timer[]="Timer:NA seconds";
 172   1        unsigned char t = 0;
 173   1        
 174   1        init_lcd();                                                                                       
 175   1        
 176   1        //Writing first line
 177   1        write_to_lcd(0x80,COMMAND); //Move to start of first line
C51 COMPILER V9.56.0.0   HOME_SECURITY_SYSTEM                                              11/30/2017 18:33:50 PAGE 4   

 178   1        while (timer[t]!='\0') 
 179   1         write_to_lcd(timer[t++],LCD_DATA);
 180   1        
 181   1        
 182   1        for (count = time; count >= 0; count--){    
 183   2          if (lsb < 0x30){
 184   3            lsb = 0x39;
 185   3            msb--;
 186   3            if (msb < 0x30){
 187   4              msb = 0x39;
 188   4            }
 189   3          }
 190   2          
 191   2          write_to_lcd(0x86,COMMAND); //Write to second line
 192   2          write_to_lcd(msb,LCD_DATA); //Writes left to right
 193   2          write_to_lcd(lsb,LCD_DATA);
 194   2          
 195   2          if (msb == 0x30 && lsb == 0x30)
 196   2          {
 197   3            break;
 198   3          }
 199   2          
 200   2          lsb--; //Deccrementing least significant bit
 201   2          
 202   2          MSDelay(250); //Replace with internal timer delay    
 203   2        }
 204   1      }
 205          
 206          void updateTimerLEDs()
 207          {
 208   1      }
 209          void turnOnAlarm()
 210          {
 211   1      }
 212          void turnOffAlarm()
 213          {
 214   1      }
 215          void flashIntruder()
 216          {
 217   1      }
 218          void soundAlarm()
 219          {
 220   1      }
 221          void resetTimer()
 222          {
 223   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    314    ----
   CONSTANT SIZE    =     17    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
